<!--
  Generated template for the EditApartmentPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="clickinn">
    <ion-title>Edit apartment</ion-title>
  </ion-navbar>
</ion-header>


<ion-content>
	<div *ngIf="loading" class="centered_on_screen">
	    <ion-spinner name="ios"></ion-spinner>
	</div>
	<ion-grid>
		<ion-row>
			<ion-col col-0 col-sm-0 col-md-0 col-lg-3>
			</ion-col>
			<ion-col col-12 col-sm-12 col-md-12 col-lg-6 style="padding: 15px 15px;">
				<ion-buttons>
					<button ion-button clear (click)="gotoBuilding()" >Edit details of this apartments property</button>
				</ion-buttons>
				<div text-center>
					<h1 text-center>Apartment Details</h1>
					<ion-item *ngIf="noLandlords == false" text-wrap>
			          <ion-label>Apartment owner</ion-label>
			          <ion-select [(ngModel)]="apartment.owner" required>
			            <ion-option  *ngFor="let landlord of landlords" value="landlord?.landlord_uid">{{landlord?.landlord_firstname}}</ion-option>
			          </ion-select>
			        </ion-item>
				    <ion-item padding-horizontal text-wrap style=" border-top-right-radius: 9px; border-top-left-radius: 9px">
				        <ion-label>Apartment Type</ion-label>
				        <ion-select [(ngModel)]="apartment.room_type" required>
				          <ion-option value="Back room">Back room</ion-option>
				          <ion-option value="Cottage">Cottage</ion-option>
				          <ion-option value="Single Room">Single room</ion-option>
				          <ion-option value="2 Sharing Room">2 Sharing room</ion-option>
				          <ion-option value="3 Sharing Room">3 Sharing room</ion-option>
				          <ion-option value="Bachelor flat">Bachelor/Studio flat</ion-option>
				          <ion-option value="4 Bedroom flat">4 Bedroom flat</ion-option>
				          <ion-option value="3 Bedroom flat">3 Bedroom flat</ion-option>
				          <ion-option value="2 Bedroom flat">2 Bedroom flat</ion-option>
				          <ion-option value="1 Bedroom flat">1 Bedroom flat</ion-option>
				          <ion-option value="4 Bedroom house">4 Bedroom house</ion-option>
				          <ion-option value="3 Bedroom house">3 Bedroom house</ion-option>
				          <ion-option value="2 Bedroom house">2 Bedroom house</ion-option>
				          <ion-option value="1 Bedroom house">1 Bedroom house</ion-option>
				          <ion-option value="Any">Any</ion-option>
				        </ion-select>
				    </ion-item>
				    <ion-item padding-horizontal text-wrap>
				        <ion-label floating style="letter-spacing: 2px">Monthly Rent (Rands)</ion-label>
				        <ion-input type="number" [(ngModel)]="apartment.price" required></ion-input>
				    </ion-item>
				    <ion-item padding-horizontal text-wrap>
				        <ion-label floating style="letter-spacing: 2px">Deposit/Securing fee (including 1st month rent) (Rands)</ion-label>
				        <ion-input type="number" [(ngModel)]="apartment.deposit" required></ion-input>
				    </ion-item>
				    <ion-item padding-horizontal>
					   <ion-label>Apartments Available</ion-label>
					   <ion-input type="number" [(ngModel)]="apartment.quantity_available" name="avail"></ion-input>
					</ion-item>
					<ion-item text-wrap margin-bottom padding-horizontal style=" border-bottom-right-radius: 9px; border-bottom-left-radius: 9px">
						<ion-label floating style="letter-spacing: 2px">Description</ion-label>
						<ion-textarea rows="7" [(ngModel)]="apartment.description"></ion-textarea>
					</ion-item>

					<div style="background: #000020; border-radius: 10px; margin-top: 18px">
						<h4 text-center padding style="color: white">Apartment images</h4>
						<ion-slides *ngIf="images && images.length" loop="true" slidesPerView="2" class="image_container" [pager]="true">
							<ion-slide *ngFor="let image of images; let idx = index">
								<div style="position: relative; top:0; left: 0; width:100%; height: 100%; ">	
									<img src="{{image?.url}}" (load)="imagesLoaded[idx] = true" [hidden]="!imagesLoaded[idx]" imageViewer class="thumb-img" />
									<img src="assets/imgs/placeholder.jpg" [hidden]="imagesLoaded[idx]" />
								</div>
								<button ion-button clear  style="position: absolute; top: 0; right: 0"  (click)="remove(idx)">
	                            	<ion-icon name="close"></ion-icon>
	                        	</button>
							</ion-slide>
						</ion-slides>
						<div *ngIf="apartmentImagesAdded">
							<h5>Added picture</h5>
							<div style="position: relative; top:0; left: 0; width:100%; height: 100%; ">
								<img src="{{fileUpload?.file}}" width="90px" height="90px" imageViewer>
							</div>
							<button ion-button clear color="danger" style="position: absolute; top: 0; right: 0"  (click)="cancelPic()">
                            	<ion-icon name="close"></ion-icon>
                        	</button>
						</div>
						<ion-buttons>
							<button ion-button clear small (click)="addPicture()" >Add more images</button>
						</ion-buttons>
					</div>
					<ion-buttons text-center padding-vertical>
						<button ion-button outline color="clickinn" (click)="save()">Save changes&nbsp;&nbsp;&nbsp; <ion-icon name="cloud-upload"></ion-icon></button>
					</ion-buttons>
				</div>
			</ion-col>
			<ion-col col-0 col-sm-0 col-md-0 col-lg-3>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-content>
