<!--
  Generated template for the DepositConfirmationPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="clickinn">
    <ion-title style="font-family: 'Ubuntu', sans-serif;">Deposit confirmation</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
	<div *ngIf="loading" class="centered_on_screen" style="background: rgba(0, 0, 0, 0.8); color: white; font-size: 35; 
    border-radius: 10px;padding: 20px; text-align: center; z-index: 1">
    <ion-spinner name="ios"></ion-spinner>
    <h3 text-center>Loading...</h3>
  </div>
  <div *ngIf="processing" class="centered_on_screen" style="background: rgba(0, 0, 0, 0.8); color: white; font-size: 35; 
    border-radius: 10px;padding: 20px; text-align: center; z-index: 1">
    <ion-spinner name="ios"></ion-spinner>
    <h3 text-center>Processing action...</h3>
  </div>
	<ion-item no-lines style="background: #000050; color: white">
		<ion-avatar item-left>
			<img src="{{deposit?.by?.dp}}}" (load)="imageLoaded = true" [hidden]="!imageLoaded" />
			<img src="assets/imgs/placeholder.png" [hidden]="imageLoaded" />
		</ion-avatar>
		<h1 text-center>	
	  		{{deposit?.by?.firstname}} {{deposit?.by?.lastname}}
	  	</h1>
	</ion-item>
	<div style="background: #000020">
		<h4 text-center padding style="color: white">Apartment pictures</h4>
		<ion-slides  loop="true" slidesPerView="2" class="image_container" [pager]="true">
			<ion-slide *ngFor="let image of images; let idx = index">
				<img src="{{image?.url}}" (load)="imagesLoaded[idx] = true" [hidden]="!imagesLoaded[idx]" imageViewer class="thumb-img" />
				<img src="assets/imgs/placeholder.jpg" [hidden]="imagesLoaded[idx]" />
			</ion-slide>
		</ion-slides>
	</div>
	<ion-item>
		<h1>Apartment type</h1>
		<p>{{deposit?.apartment?.room_type}}</p>
	</ion-item>
	<ion-item padding-horizontal>
        <h1>Monthly Rent (Rands)</h1>
        <p>R{{deposit?.apartment?.price}}</p>
    </ion-item>
    <ion-item padding-horizontal>
        <h1>Deposit/Securing fee (Rands)</h1>
        <p>R{{deposit?.apartment?.deposit}}</p>
    </ion-item>
    <ion-item padding-horizontal>
        <h1>Availability</h1>
        <p>{{deposit?.apartment?.available ? 'Apartment available' : 'Apartment not available'}}</p>
    </ion-item>
    <ion-item padding-horizontal>
        <h1>Description</h1>
        <p>{{deposit?.apartment?.description}}</p>
    </ion-item>

    <h1 *ngIf="host" style="text-align: center;">Accept deposit ?</h1>
	<p *ngIf="host" style="text-align: center;">Please do not accept if the apartment is not obviously available</p>
	<h1 *ngIf="!host" style="text-align: center;">Confirm deposit</h1>
	<p *ngIf="!host" style="text-align: center;">Please confirm whether you have deposited the amount required</p>

	<ion-buttons text-center *ngIf="host">
		<button ion-button round (click)="acceptDeposit()" >Accept</button>
		<button ion-button round (click)="rejectDeposit()" color="danger">Decline</button>
	</ion-buttons>

	<ion-buttons text-center *ngIf="!host">
		<button ion-button round (click)="confirmDeposit()" >Confirm</button>
		<button ion-button round (click)="cancelDeposit()" color="danger">Failed to deposit</button>
	</ion-buttons>
	
</ion-content>
